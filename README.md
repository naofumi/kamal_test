# Kamal Test Project

This is an example Kamal project in Rails that I build to understand configurations better.

## Set `proxy: app_port: 3000`

In `config/deploy.yml`, you need to set `proxy: {app_port: 3000}`. The default is port: 80.

## Dockerfile WORKDIR is "rails", not "app"

The default Rails Dockerfile sets `WORKDIR /rails`. However, the default `config/deploy.yml` generated by `kamal init` assumes that the WORKDIR is `/app`. You need to all references to `/rails`.

## Don't redirect to https for health checks

Uncomment the following line in Rails `production.rb`

```ruby
config.ssl_options = { redirect: { exclude: ->(request) { request.path == "/up" } } }
```


